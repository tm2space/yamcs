<ya-instance-page>
  <ya-instance-toolbar>
    <ng-template ya-instance-toolbar-label>
      <ya-page-icon-button
        [routerLink]="['/booking']"
        [queryParams]="{ c: yamcs.context }"
        icon="arrow_back" />
      Pending Approvals
    </ng-template>

    <ya-page-button (clicked)="refresh()" icon="refresh">Refresh</ya-page-button>
  </ya-instance-toolbar>

  <ya-panel>
    <table mat-table [dataSource]="pendingBookings" class="ya-data-table expand">
      <ng-container cdkColumnDef="startTime">
        <th mat-header-cell *cdkHeaderCellDef>Start Time</th>
        <td mat-cell *cdkCellDef="let booking">
          {{ formatDateTime(booking.startTime) }}
        </td>
      </ng-container>

      <ng-container cdkColumnDef="durationMinutes">
        <th mat-header-cell *cdkHeaderCellDef>Duration</th>
        <td mat-cell *cdkCellDef="let booking">
          {{ booking.durationMinutes }} min
        </td>
      </ng-container>

      <ng-container cdkColumnDef="satelliteId">
        <th mat-header-cell *cdkHeaderCellDef>Satellite</th>
        <td mat-cell *cdkCellDef="let booking">
          {{ booking.satelliteId }}
        </td>
      </ng-container>

      <ng-container cdkColumnDef="provider">
        <th mat-header-cell *cdkHeaderCellDef>Provider</th>
        <td mat-cell *cdkCellDef="let booking">
          {{ booking.provider }}
        </td>
      </ng-container>

      <ng-container cdkColumnDef="passType">
        <th mat-header-cell *cdkHeaderCellDef>Pass Type</th>
        <td mat-cell *cdkCellDef="let booking">
          <span class="pass-type-badge">{{ booking.passType | titlecase }}</span>
        </td>
      </ng-container>

      <ng-container cdkColumnDef="purpose">
        <th mat-header-cell *cdkHeaderCellDef class="expand">Purpose</th>
        <td mat-cell *cdkCellDef="let booking" class="expand">
          {{ booking.purpose }}
        </td>
      </ng-container>

      <ng-container cdkColumnDef="requestedBy">
        <th mat-header-cell *cdkHeaderCellDef>Requested By</th>
        <td mat-cell *cdkCellDef="let booking">
          {{ booking.requestedBy }}
        </td>
      </ng-container>

      <ng-container cdkColumnDef="actions">
        <th mat-header-cell *cdkHeaderCellDef>Actions</th>
        <td mat-cell *cdkCellDef="let booking">
          <ya-button
            appearance="primary"
            (click)="approveBooking(booking)"
            style="margin-right: 8px;">
            APPROVE
          </ya-button>
          <ya-button
            appearance="secondary"
            (click)="rejectBooking(booking)">
            REJECT
          </ya-button>
        </td>
      </ng-container>

      <tr mat-header-row *cdkHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *cdkRowDef="let row; columns: displayedColumns;"></tr>
    </table>
  </ya-panel>
</ya-instance-page>